# 适配器模式(Adapter)

## 场景：使用插排为手机充电


功能提供者：插排

功能需要者：手机

但是两者并不能直接结合去完成为手机充电的需求，那么此时充电适配器就来了，它的两端分别连接插排与手机，解决了插排和手机接口不匹配的问题。

## 需求中的问题


功能的迭代是不具有未卜先知的，那么问题就来了：在第一期的需求中实现了通过文件去读写日志的逻辑，但是在第 N 期的需求需要通过数据库来读取日志，怎么办？确实是可以重新实现新的功能，但是在开发中，我们需要做的是尽可能复用现有的代码，而不是重新实现，省出来的时间跑个 5
公里，它不香吗？

## 适配器模式

书中对适配器模式的定义：

> 将一个类的接口转换成客户端希望的另一个接口。适配器模式使得原本 **由于接口不兼容而不能在一起工作** 的那些类可以在一起工作。  


通过定义我们就了解到：适配器模式解决的是接口不兼容的问题。

## 代码展示

需求：

日志记录系统：

一期：使用文件来读、写日志；

N 期：使用数据库来读、写日志；

现在的情况是一期和 N 期 分别实现了文件、数据库的读写日志，其实这已经完全实现了功能，但是能不能在 **N 期的实现中同时支持对数据库存储和文件存储两种方式的存储方式**。


要想合并两种实现方式的困难就是：两种方式的接口不同，当时客户端无法使用相同的方式(N 期中而接口)来使用第一版的实现。

## 个人思考

我一直觉得代码中的例子不是很适合，也或者是自己没想通，如果就按照客户端中的这种写法，使用适配器模式完全没必要，除非要向上文中所说：使用新接口来支持旧接口，很明显增加了代码量。

除了这种显式的要求外，我觉得更适合的场景是在现有系统基础上对接其他系统，比如存在这样一个场景：两个系统都有对用户管理的功能，但是相应的接口不同，要想做到兼容两个系统的接口，那么适配器模式将会是一个好的选择。

继续理解适配器模式吧，还是认识比较浅薄。

